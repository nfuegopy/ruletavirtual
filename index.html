<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head runat="server">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruleta de Sorteos</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/sweetalert.css">

    <!-- JavaScript -->
    <script src="js/Winwheel.min.js"></script>
    <script src="js/TweenMax.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="js/sweetalert.min.js"></script>

    <!-- Open Graph Meta Tags -->
    <meta property="og:url" content="https://github.com/nfuegopy/ruletavirtual">
    <meta property="og:type" content="article">
    <meta property="og:title" content="La ruleta (Rifa cosas)">

    
    <style>
        #canvasContainer {
            background-image: url('img/regalo.gif');
            background-repeat: no-repeat;
            background-position: center;
            max-width: 100%;
            height: auto;
            cursor: pointer;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            #canvasContainer {
                width: 100%;
                height: auto;
            }

            canvas {
                width: 100% !important;
                height: auto !important;
            }
        }

        .contact-button {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #25D366;
            color: white;
            padding: 10px;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            text-decoration: none;
        }

        .contact-button i {
            font-size: 24px;
        }

        .footer-contact {
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <form id="form1" runat="server">
        <div class="container-fluid">
            <div class="row justify-content-center">
         <!--       <div class="col-12 col-md-3 text-center mb-4"> -->
                    <!-- <div class="text-left">
                        <img src="img/premios.png" class="img-fluid" alt="Premios">
                    </div> -->
                    <div class="card bg-warning d-none">
                        <div class="card-body d-none">
                            <h4 class="card-title">Lista de elementos: </h4>
                            <textarea id="ListaElementos" class="form-control" rows="13" style="display:none;">
Bolso
Carpeta
Boligrafo
Gs. 200.000
Remera
Termo de Mate
Gs. 50.000
                            </textarea>
                            <br>
                            <input type="button" onclick="leerElementos()" class="btn btn-danger btn-lg btn-block" value="Generar Ruleta" style="display:none;">
                            <br>
                        </div>
                    </div>
                <!-- </div> -->

                <div class="col-12 col-md-7 text-center mb-4">
                    <input id="bigButton" class="btn btn-success btn-block btn-lg mb-3" onclick="objRuleta.startAnimation(); this.disabled=true;" value="Jugar Ruleta" type="button">
                    <div id="canvasContainer" onclick="objRuleta.startAnimation();bigButton.disabled = true;">
                        <canvas id='Ruleta' width='650' height='650'>
                            Canvas not supported, use another browser.
                        </canvas>
                    </div>
                </div>
            </div>
        </div>

        <script>
            var objRuleta;
            var winningSegment;
            var distnaciaX = 150;
            var distnaciaY = 50;
            var ctx;

            function Mensaje() {
                winningSegment = objRuleta.getIndicatedSegment();
                SonidoFinal();
                swal({
                    title: " ¡Ganaste " + winningSegment.text + " !",
                    imageUrl: "img/Muerte.png",
                    showCancelButton: true,
                    confirmButtonColor: "#e74c3c",
                    confirmButtonText: "Reiniciar",
                    cancelButtonText: "Continuar",
                    closeOnConfirm: true,
                    closeOnCancel: true
                },
                function (isConfirm) {
                    if (isConfirm) {

                    } else {
                        leerElementos();
                    }
                    objRuleta.stopAnimation(false);
                    objRuleta.rotationAngle = 0;
                    objRuleta.draw();
                    DibujarTriangulo();
                    bigButton.disabled = false;
                });
            }

            function DibujarTriangulo() {
                ctx = objRuleta.ctx;
                ctx.strokeStyle = 'navy';
                ctx.fillStyle = '#000000';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(distnaciaX + 170, distnaciaY + 5);
                ctx.lineTo(distnaciaX + 230, distnaciaY + 5);
                ctx.lineTo(distnaciaX + 200, distnaciaY + 40);
                ctx.lineTo(distnaciaX + 171, distnaciaY + 5);
                ctx.stroke();
                ctx.fill();
            }

            function DibujarRuleta(ArregloElementos) {
                objRuleta = new Winwheel({
                    'canvasId': 'Ruleta',
                    'numSegments': ArregloElementos.length,
                    'outerRadius': 270,
                    'innerRadius': 80,
                    'segments': ArregloElementos,
                    'animation': {
                        'type': 'spinToStop',
                        'duration': 4,
                        'spins': 20,
                        'callbackFinished': 'Mensaje()',
                        'callbackAfter': 'DibujarTriangulo()'
                    },
                });
                DibujarTriangulo();
            }

            function leerElementos() {
                var txtListaElementos = $('#ListaElementos').val().trim();
                var Elementos = txtListaElementos.split('\n');
                var ElementosRuleta = [];
                Elementos.forEach(function (Elemento) {
                    if (Elemento) {
                        ElementosRuleta.push({ 'fillStyle': "#" + ((1 << 24) * Math.random() | 0).toString(16), 'text': Elemento });
                    }
                });
                DibujarRuleta(ElementosRuleta);
            }
            leerElementos();

            var audio = new Audio('alama.mp3');  // Create audio object and load desired file.
            function SonidoFinal() {
                audio.pause();
                audio.currentTime = 0;
                audio.play();
            }
        </script>
    </form>

    <div class="container text-center mt-4 mb-4">
    
        <a href="https://wa.me/595982580075" class="contact-button">
            <i class="fab fa-whatsapp"></i>
        </a>
    </div>

    <footer class="text-center mt-4 bg-dark text-white py-3">
        <div class="container">
            <span>©2024 Antonio Barrios, Inc. Todos los derechos reservados.</span>
            <div class="mt-2">
                <a href="mailto:acbleguizamon@gmail.com" class="text-white mx-2">
                    <i class="fas fa-envelope"></i> acbleguizamon@gmail.com
                </a>
                <a href="tel:+595982580075" class="text-white mx-2">
                    <i class="fas fa-phone"></i> +595 982 580 075
                </a>
                <a href="https://www.linkedin.com/in/acbleguizamon?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" class="text-white mx-2">
                    <i class="fab fa-linkedin"></i> Antonio Barrios
                </a>
                <a href="https://www.instagram.com/nfuegopy?igsh=cmNqNXB6NHEyN2V1" class="text-white mx-2">
                    <i class="fab fa-instagram"></i> NfuegoPy
                </a>
                <a href="https://x.com/AntonioNFuegoPy?t=jV-D9Q7I2-EBipCj74r_eg&s=09" class="text-white mx-2">
                    <i class="fab fa-twitter"></i> AntonioNFuegoPy
                </a>
            </div>
        </div>
    </footer>
    
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
</body>
</html>
